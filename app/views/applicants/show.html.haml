- model_class = Applicant
.page-header
  %h1 Omat tietoni

%p
  %strong= model_class.human_attribute_name(:nimi) + ':'
  = @applicant.name
%p
  %strong= model_class.human_attribute_name(:tmc_tunnus) + ':'
  = @applicant.nick
%p
  %strong= model_class.human_attribute_name(:sähköpostiosoite) + ':'
  = @applicant.email
- if admin?
  %p
    %strong= model_class.human_attribute_name(:message_sent) + ':'
    = @applicant.message_sent ? '✓' : '✘'

%p
  - unless @applicant.missing_points.blank?
    %strong= model_class.human_attribute_name(:puuttuvat_pisteet) + ':'
    %br
    = @applicant.missing_points

%p
  - unless @applicant.original_missing_points.blank?
    %strong= model_class.human_attribute_name(:puuttuvat_pisteet) + ':'
    %br
    = @applicant.original_missing_points
%p
  %strong= model_class.human_attribute_name(:selitystehtävät) + ':'
  %br

  = list_explanations(@applicant.explanations)

%p

  %table.table.table-striped.table-hover.table-bordered
    %thead
      %tr
        %th Type
        - 1.upto(14).each do |i|
          %th= model_class.human_attribute_name("Viikko #{i}".to_sym)
    %tbody
      %tr
        %td All
        - 1.upto(14).each do |i|
          %td= format_week_percents(@applicant.send("week#{i}".to_sym))
      -if admin?
        %tr
          %td TMC
          - 1.upto(14).each do |i|
            %td= format_week_percents(@applicant.send("only_tmc_week#{i}".to_sym))
  %p
    Pisteet päivitetty:
    = Settings.data_updated_at.strftime("%a %d.%m.%Y klo  %H:%M")
    Virallinen ajantasalla oleva pistelista on kurssisivuilla.
  - if admin?
    #ul
      - 1.upto(14).each do |i|
        %li= @applicant.send("points_week#{i}".to_sym)

%p

  - if applicant? and applicant?.not_yet_registerd
    = link_to "Ilmoittaudu näyttökokeeseen tästä", interviews_path, class: "btn btn-primary"
  - else
    %p
      (Mikäli haluat perua tai muuttaa haastattelusi aikaa, klikkaa linkkiä ja tee muutos siellä):
      = link_to "Varaamani aika #{@applicant.interview}", interviews_path
%p
  = form_for @applicant, html: {class: "form-horizontal"} do |f|
    .form-group
      = f.label "Kirjoitelma:", class: "col-sm-2 control-label"
      .col-sm-10
        = f.text_area :essay, class: "input-block-level form-control", rows: 30, disabled: admin?
    .form-group
      .col-sm-offset-2.col-sm-10
        = f.submit (@applicant.essay.blank? ?  "Tallenna kirjoitelma" : "Päivitä kirjoitelma"), class: 'btn btn-primary'


- if admin?
  %p
    = form_for @applicant, html: {class: "form-horizontal"} do |f|
      .form-group
        .col-sm-offset-2.col-sm-10
          .checkbox
            = label_tag do
              = f.check_box :message_sent
              Message sent
      .form-group
        .col-sm-offset-2.col-sm-10
          = f.submit "Update message sent status", class: "btn btn-warning"

    .jumbotron
      %h3 Title:
      %p= raw @title
      %h3 Email template:
      %p= raw @email

    = form_for @applicant, method: :post, url: applicant_email_path(@applicant.key), html: {class: "form-horizontal"} do |f|
      .form-group
        .col-sm-offset-2.col-sm-10
          = f.submit "Send email", class: "btn btn-warning"
